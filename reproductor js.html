<!DOCTYPE html>
<html lang=”es”>
  <head>
      <meta charset="UTF-8">
      <title> EmCa Producciones </title>
      <link rel="stylesheet" href="CSS/estilo2.css">
      <link rel="stylesheet" href="https://pro.fontawesome.com/releases/v5.10.0/css/all.css" integrity="sha384-AYmEC3Yw5cVb3ZcuHtOA93w35dYTsvhLPVnYs9eStHfGJvOvKxVfELGroGkvsg+p" crossorigin="anonymous"/>
      <link rel="preconnect" href="https://fonts.gstatic.com">
      <link href="https://fonts.googleapis.com/css2?family=Niconne&family=Sansita:wght@700&family=Tajawal:wght@400;500&display=swap" rel="stylesheet">
  </head>
  <body>
      <br>
      <br>
      <br>
      <br>
      
      <audio id="audio" preload="auto" tabindex="0" controls="" >
        <source src="https://s3-us-west-2.amazonaws.com/allmetalmixtapes/Saxon%20-%201984%20-%20Crusader/01%20-%20Crusader%20Prelude.mp3">
      </audio>

<ul id="playlist">
        <li class="active">
           <a href="audios/Besos_en_guerra.mp3">
             Saxon - Crusader Prelude
           </a>
        </li>
        <li>
            <a href="audios/Consejo_de_amor.mp3">
                Saxon - Little Bit Of What You Fancy
            </a>
        </li>
        <li>
            <a href="<Somos_Anormales.mp3">
                Saxon - Sailing To America
            </a>
        </li>
        <li>
            <a href="https://s3-us-west-2.amazonaws.com/allmetalmixtapes/Saxon%20-%201984%20-%20Crusader/05%20-%20Set%20Me%20Free.mp3">
                Saxon - Set Me Free
            </a>
        </li>
        <li>
            <a href="https://s3-us-west-2.amazonaws.com/allmetalmixtapes/Saxon%20-%201984%20-%20Crusader/06%20-%20Just%20Let%20Me%20Rock.mp3">
                Saxon - Just Let Me Rock
            </a>
        </li>
    </ul>


     <script type="text/javascript"> init();

function init(){
    var audio = document.getElementById('audio');
    var playlist = document.getElementById('playlist');
    var tracks = playlist.getElementsByTagName('a');
    audio.volume = 0.10;
    audio.play();
    
    for(var track in tracks) {
      var link = tracks[track];
      if(typeof link === "function" || typeof link === "number") continue;
      
      link.addEventListener('click', function(e) {
        e.preventDefault();
        var song = this.getAttribute('href');
        run(song, audio, this);
      });
    }
    
    audio.addEventListener('ended',function(e) {
        for(var track in tracks) {
          var link = tracks[track];
          var nextTrack = parseInt(track) + 1;
          if(typeof link === "function" || typeof link === "number") continue;
          if(!this.src) this.src = tracks[0];
          if(track == (tracks.length - 1)) nextTrack = 0;
                                  console.log(nextTrack);
          if(link.getAttribute('href') === this.src) {
            var nextLink = tracks[nextTrack];
            run(nextLink.getAttribute('href'), audio, nextLink);
            break;
          }
        }
    });
}

function run(song, audio, link){
        var parent = link.parentElement;

        //quitar el active de todos los elementos de la lista
        var items = parent.parentElement.getElementsByTagName('li');
        for(var item in items) {
          if(items[item].classList)
            items[item].classList.remove("active");
        }
        
        //agregar active a este elemento
        parent.classList.add("active");
        
        //tocar la cancion
        audio.src = song;
        audio.load();
        audio.play();
}

</script>

  </body>
</html>